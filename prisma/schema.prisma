generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model account {
  account_id                  String                        @id @db.Uuid
  email                       String                        @db.VarChar(50)
  account_password            String                        @db.VarChar(60)
  account_language            String                        @db.VarChar(3)
  user_role_id                String                        @db.Uuid
  user_role                   user_role                     @relation(fields: [user_role_id], references: [user_role_id], onDelete: NoAction, onUpdate: NoAction)
  account_author_group_follow account_author_group_follow[]
  account_author_group_member account_author_group_member[]
  account_book_follow         account_book_follow[]
  account_chapter_follow      account_chapter_follow[]
  account_genre_follow        account_genre_follow[]
  book_comment                book_comment[]
  chapter_comment             chapter_comment[]
  genre_comment               genre_comment[]
}

model account_author_group_follow {
  account_id      String       @db.Uuid
  author_group_id String       @db.Uuid
  account         account      @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  author_group    author_group @relation(fields: [author_group_id], references: [author_group_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([account_id, author_group_id])
}

model account_author_group_member {
  account_id      String       @db.Uuid
  author_group_id String       @db.Uuid
  account         account      @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  author_group    author_group @relation(fields: [author_group_id], references: [author_group_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([account_id, author_group_id])
}

model account_book_follow {
  account_id String  @db.Uuid
  book_id    String  @db.Uuid
  account    account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  book       book    @relation(fields: [book_id], references: [book_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([account_id, book_id])
}

model account_chapter_follow {
  account_id String  @db.Uuid
  chapter_id String  @db.Uuid
  account    account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  chapter    chapter @relation(fields: [chapter_id], references: [chapter_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([account_id, chapter_id])
}

model account_genre_follow {
  account_id String  @db.Uuid
  genre_id   String  @db.Uuid
  account    account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  genre      genre   @relation(fields: [genre_id], references: [genre_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([account_id, genre_id])
}

model author_group {
  author_group_id             String                        @id @db.Uuid
  author_group_rating         Int?
  author_group_image_url      String?                       @db.VarChar(100)
  account_author_group_follow account_author_group_follow[]
  account_author_group_member account_author_group_member[]
  book                        book[]
}

model book {
  book_id                  String                @id @db.Uuid
  book_name                String                @db.VarChar(50)
  author_group_id          String                @db.Uuid
  genre_id                 String                @db.Uuid
  summary_text             String?               @db.VarChar(200)
  original_book_id         String?               @db.Uuid
  book_image_url           String?               @db.VarChar(100)
  is_copiable              Boolean
  is_published             Boolean
  is_flagged_inappropriate Boolean
  created_on               DateTime              @db.Timestamp(6)
  account_book_follow      account_book_follow[]
  author_group             author_group          @relation(fields: [author_group_id], references: [author_group_id], onDelete: Cascade, onUpdate: NoAction)
  genre                    genre                 @relation(fields: [genre_id], references: [genre_id], onDelete: Cascade, onUpdate: NoAction)
  book                     book?                 @relation("bookTobook", fields: [original_book_id], references: [book_id], onUpdate: NoAction, map: "book_original_book_fk")
  other_book               book[]                @relation("bookTobook")
  book_comment             book_comment[]
  chapter                  chapter[]
}

model book_comment {
  book_comment_id   String  @id @db.Uuid
  book_comment_text String  @db.VarChar(255)
  book_id           String  @db.Uuid
  account_id        String  @db.Uuid
  account           account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  book              book    @relation(fields: [book_id], references: [book_id], onDelete: Cascade, onUpdate: NoAction)
}

model chapter {
  chapter_id             String                   @id @db.Uuid
  chapter_sequence       Int
  chapter_content        String
  chapter_rating         Int?
  chapter_image_url      String?                  @db.VarChar(100)
  created_on             DateTime                 @db.Timestamp(6)
  book_id                String                   @db.Uuid
  account_chapter_follow account_chapter_follow[]
  book                   book                     @relation(fields: [book_id], references: [book_id], onDelete: Cascade, onUpdate: NoAction)
  chapter_comment        chapter_comment[]
}

model chapter_comment {
  chapter_comment_id   String  @id @db.Uuid
  chapter_comment_text String  @db.VarChar(255)
  chapter_id           String  @db.Uuid
  account_id           String  @db.Uuid
  account              account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  chapter              chapter @relation(fields: [chapter_id], references: [chapter_id], onDelete: Cascade, onUpdate: NoAction)
}

model genre {
  genre_id             String                 @id @db.Uuid
  genre_name           String                 @db.VarChar(50)
  genre_image_url      String?                @db.VarChar(100)
  created_on           DateTime               @db.Timestamp(6)
  genre_rating         Int?
  account_genre_follow account_genre_follow[]
  book                 book[]
  genre_comment        genre_comment[]
}

model genre_comment {
  genre_comment_id   String  @id @db.Uuid
  genre_comment_text String  @db.VarChar(255)
  genre_id           String  @db.Uuid
  account_id         String  @db.Uuid
  account            account @relation(fields: [account_id], references: [account_id], onDelete: Cascade, onUpdate: NoAction)
  genre              genre   @relation(fields: [genre_id], references: [genre_id], onDelete: Cascade, onUpdate: NoAction)
}

model user_role {
  user_role_id String    @id @db.Uuid
  name         String    @db.VarChar(6)
  account      account[]
}
